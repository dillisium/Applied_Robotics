(function(e){function t(t){for(var a,l,s=t[0],u=t[1],o=t[2],f=0,d=[];f<s.length;f++)l=s[f],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&d.push(i[l][0]),i[l]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);r&&r(t);while(d.length)d.shift()();return c.push.apply(c,o||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(a=!1)}a&&(c.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},i={app:0},c=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var o=0;o<s.length;o++)t(s[o]);var r=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},2:function(e,t){},3:function(e,t){},3504:function(e){e.exports=JSON.parse('{"UpdateFirmware":"更新固件","UpdatePackage":"更新程序","PkgDwLink":"更新包下载链接","UpdateProgress":"更新进度"}')},4:function(e,t){},5:function(e,t){},"5cdd":function(e,t,n){},6:function(e,t){},7:function(e,t){},8:function(e,t){},"9f8c":function(e,t,n){"use strict";n("a8cf")},a8cf:function(e,t,n){},aa6c:function(e,t,n){"use strict";n("5cdd")},b7e9:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("becf"),n("eb46");var a=n("7a23"),i={id:"app"};function c(e,t,n,c,l,s){var u=Object(a["x"])("router-view");return Object(a["q"])(),Object(a["d"])("div",i,[Object(a["g"])(u)])}n("a4d3"),n("e01a"),n("c975"),n("d3b7");var l=function(e){return{locale:Object(a["v"])(e.locale),messages:e.messages,$t:function(e){return this.messages[this.locale.value][e]}}},s=Symbol(),u={provide:function(e){var t=l(e),n=navigator.language.indexOf("zh")>=0?"zh":"en";console.log(n),t.locale.value=n,Object(a["s"])(s,t)},use:function(){var e=Object(a["k"])(s);if(!e)throw new Error("No i18n provided!!!");return e}},o=u,r=(n("c19f"),n("25f0"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("e7fc")),f=n.n(r),d={mqttConnected:!1,managerOn:!1,usys:{isUpdating:!1,deletedFile:"",updateProgress:0,updateMsg:""}},b=JSON.stringify(d),p=function(){return JSON.parse(b)},O=n("5530"),g=n("1386"),j=n.n(g),v=new j.a,y={"usys/run":function(e,t){e.managerOn=t.byteLength>0},"usys/deleted":function(e,t){e.usys.deletedFile=t.toString("utf-8")+":"+Math.random()},"usys/updating":function(e,t){var n=t.byteLength>0;e.usys.isUpdating=n,n&&(e.usys.updateMsg="")},"usys/info":function(e,t){var n=t.toString();0===n.indexOf("]0;unitree")&&(n=n.substring(n.indexOf("[")-1,n.length-1)),0!==n.indexOf("unitree@")&&(e.usys.updateMsg+=v.ansi_to_html(n))}},h=y,m=Object(O["a"])({},h);function w(e,t,n){var a=e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),c=m[a];c?c(n,t,i):console.log(t)}var k=null,q={data:Object(a["u"])(p()),connect:function(e){k&&k.end();var t="UApp_"+Math.random().toString(16).substr(2,8);k=f.a.connect(e,{clientId:t,keepalive:5,will:{topic:"appStatus",payload:"disconnect_"+t,retain:!0,qos:1}}),k.on("connect",(function(){q.data.mqttConnected=!0,q.subscribe(["usys/run","usys/info","usys/updating","usys/deleted"],{qos:1})})),k.on("message",(function(e,t){w(e,t,q.data)})),k.on("close",(function(){Object.assign(q.data,p())}))},subscribe:function(e,t){var n;null===(n=k)||void 0===n||n.subscribe(e,t)},unsubscribe:function(e){var t;null===(t=k)||void 0===t||t.unsubscribe(e)},publish:function(e,t,n){var a;if("string"===typeof t||t instanceof Uint8Array)null===(a=k)||void 0===a||a.publish(e,t,n);else if(t instanceof ArrayBuffer){var i;null===(i=k)||void 0===i||i.publish(e,new Uint8Array(t))}}},U=Symbol(),F={provide:function(){var e="https:"===window.location.protocol?"wss://":"ws://";q.connect(e+window.location.host+"/mqtt"),Object(a["s"])(U,q)},use:function(){var e=Object(a["k"])(U);if(!e)throw new Error("No mqtt provided!!!");return e}},x=F,C=n("edd4"),P=n("3504"),z=Object(a["h"])({setup:function(){o.provide({locale:"en",messages:{zh:P,en:C}}),x.provide()}});n("ce33");z.render=c;var M=z,_=n("6c02"),D=(n("b0c0"),n("9911"),Object(a["F"])("data-v-22971a06"));Object(a["t"])("data-v-22971a06");var S={class:"u-update"},T={style:{width:"100%","margin-bottom":"10px"}},L={style:{"font-size":"xx-large"}},N=Object(a["g"])("a",null,"www.unitree.com",-1),H={class:"u-uploader"},$={class:"u-form"},A={class:"u-filename file"},J=Object(a["g"])("i",{class:"fas fa-folder"},null,-1),I={key:0,class:"fas fa-upload"},E={key:1,class:"fa fa-spinner fa-spin"},B={class:"u-file-list"},V=Object(a["g"])("i",{class:"fa fa-file"},null,-1),G={class:"u-file-btn"},K=Object(a["f"])(" | "),Q={class:"u-info"},R=Object(a["g"])("i",{class:"fa fa-info-circle"},null,-1),W={key:0,class:"fa fa-spinner fa-spin",style:{float:"right",margin:"4px 0px"}};Object(a["r"])();var X=D((function(e,t,n,i,c,l){return Object(a["q"])(),Object(a["d"])("div",S,[Object(a["g"])("div",T,[Object(a["g"])("h1",L,Object(a["z"])(e.i18n.$t("UpdatePackage")),1),Object(a["g"])("h3",null,[Object(a["f"])(Object(a["z"])(e.i18n.$t("PkgDwLink"))+": ",1),N])]),Object(a["g"])("div",H,[Object(a["g"])("div",$,[Object(a["g"])("div",A,[Object(a["g"])("input",{class:"file-input",type:"file",onChange:t[1]||(t[1]=function(){return e.fileChange&&e.fileChange.apply(e,arguments)})},null,32),J,Object(a["f"])(" "+Object(a["z"])(e.file?e.file.name:""),1)]),Object(a["g"])("div",{class:"u-btn",onClick:t[2]||(t[2]=function(){return e.uploadFile&&e.uploadFile.apply(e,arguments)})},[e.isUploading?(Object(a["q"])(),Object(a["d"])("i",E)):(Object(a["q"])(),Object(a["d"])("i",I))])]),Object(a["g"])("div",B,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(e.uploaded.files,(function(t){return Object(a["q"])(),Object(a["d"])("div",{class:"u-file",key:t.name},[V,Object(a["f"])(" "+Object(a["z"])(t.name)+" ",1),Object(a["g"])("span",G,[Object(a["g"])("i",{class:"fa fa-play",style:{color:"orange"},onClick:function(n){return e.runUpdateFile(t.link)}},null,8,["onClick"]),K,Object(a["g"])("i",{class:"fa fa-trash-alt",style:{color:"red"},onClick:function(n){return e.deleteFile(t.link)}},null,8,["onClick"])])])})),128))])]),Object(a["g"])("div",Q,[Object(a["g"])("h3",{style:e.mqtt.data.usys.isUpdating?"background-color: yellow;":""},[R,Object(a["f"])(" "+Object(a["z"])(e.i18n.$t("UpdateProgress"))+" ",1),e.mqtt.data.usys.isUpdating?(Object(a["q"])(),Object(a["d"])("i",W)):Object(a["e"])("",!0)],4),Object(a["g"])("div",{class:"u-progress",innerHTML:e.mqtt.data.usys.updateMsg,ref:"progressDiv"},null,8,["innerHTML"])]),Object(a["E"])(Object(a["g"])("div",null,Object(a["z"])(e.mqtt.data.usys.deletedFile),513),[[a["B"],!1]])])})),Y=n("bc3a"),Z=n.n(Y),ee=Object(a["h"])({setup:function(){var e=o.use(),t=x.use(),n=Object(a["v"])(null),i=Object(a["v"])(""),c=Object(a["v"])(null),l=Object(a["u"])({files:[]}),s=Object(a["v"])(!1),u=Object(a["v"])("http://"+window.location.host+"/upload/"),r=function(){Z.a.get(u.value).then((function(e){e.data.files&&(l.files=e.data.files)}))},f=function(e){var t=e.target;t.files&&(n.value=t.files[0])},d=function(){if(n.value){var e=new FormData;e.append("file",n.value),s.value=!0,Z.a.post(u.value,e,{headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){console.log(e)})).finally((function(){s.value=!1,setTimeout((function(){r()}),500)}))}else alert("No file selected!")},b=function(e){t.publish("usys/delete",e,{qos:1})},p=function(e){t.publish("usys/update_package",e,{qos:1})};return Object(a["o"])((function(){r()})),Object(a["D"])((function(){t.data.usys.deletedFile&&r()})),Object(a["D"])((function(){t.data.usys.updateMsg.length>0&&setTimeout((function(){c.value&&(c.value.scrollTop=c.value.scrollHeight)}),100)})),{i18n:e,mqtt:t,fileChange:f,file:n,uploadFile:d,uploaded:l,uploadAddress:u,isUploading:s,deleteFile:b,runUpdateFile:p,updateInfo:i,progressDiv:c}}});n("9f8c");ee.render=X,ee.__scopeId="data-v-22971a06";var te=ee,ne=Object(a["F"])("data-v-49e3f421");Object(a["t"])("data-v-49e3f421");var ae={class:"u-update"},ie={style:{width:"100%","margin-bottom":"10px"}},ce={style:{"font-size":"xx-large"}},le=Object(a["g"])("a",null,"www.unitree.com",-1),se={class:"u-uploader"},ue={class:"u-form"},oe={class:"u-filename file"},re=Object(a["g"])("i",{class:"fas fa-folder"},null,-1),fe={key:0,class:"fas fa-upload"},de={key:1,class:"fa fa-spinner fa-spin"},be={class:"u-file-list"},pe=Object(a["g"])("i",{class:"fa fa-file"},null,-1),Oe={class:"u-file-btn"},ge=Object(a["f"])(" | "),je={class:"u-info"},ve=Object(a["g"])("i",{class:"fa fa-info-circle"},null,-1),ye={key:0,class:"fa fa-spinner fa-spin",style:{float:"right",margin:"4px 0px"}};Object(a["r"])();var he=ne((function(e,t,n,i,c,l){return Object(a["q"])(),Object(a["d"])("div",ae,[Object(a["g"])("div",ie,[Object(a["g"])("h1",ce,Object(a["z"])(e.i18n.$t("UpdateFirmware")),1),Object(a["g"])("h3",null,[Object(a["f"])(Object(a["z"])(e.i18n.$t("PkgDwLink"))+": ",1),le])]),Object(a["g"])("div",se,[Object(a["g"])("div",ue,[Object(a["g"])("div",oe,[Object(a["g"])("input",{class:"file-input",type:"file",onChange:t[1]||(t[1]=function(){return e.fileChange&&e.fileChange.apply(e,arguments)})},null,32),re,Object(a["f"])(" "+Object(a["z"])(e.file?e.file.name:""),1)]),Object(a["g"])("div",{class:"u-btn",onClick:t[2]||(t[2]=function(){return e.uploadFile&&e.uploadFile.apply(e,arguments)})},[e.isUploading?(Object(a["q"])(),Object(a["d"])("i",de)):(Object(a["q"])(),Object(a["d"])("i",fe))])]),Object(a["g"])("div",be,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(e.uploaded.files,(function(t){return Object(a["q"])(),Object(a["d"])("div",{class:"u-file",key:t.name},[pe,Object(a["f"])(" "+Object(a["z"])(t.name)+" ",1),Object(a["g"])("span",Oe,[Object(a["g"])("i",{class:"fa fa-play",style:{color:"orange"},onClick:function(n){return e.runUpdateFile(t.link)}},null,8,["onClick"]),ge,Object(a["g"])("i",{class:"fa fa-trash-alt",style:{color:"red"},onClick:function(n){return e.deleteFile(t.link)}},null,8,["onClick"])])])})),128))])]),Object(a["g"])("div",je,[Object(a["g"])("h3",{style:e.mqtt.data.usys.isUpdating?"background-color: yellow;":""},[ve,Object(a["f"])(" "+Object(a["z"])(e.i18n.$t("UpdateProgress"))+" ",1),e.mqtt.data.usys.isUpdating?(Object(a["q"])(),Object(a["d"])("i",ye)):Object(a["e"])("",!0)],4),Object(a["g"])("div",{class:"u-progress",innerHTML:e.mqtt.data.usys.updateMsg,ref:"progressDiv"},null,8,["innerHTML"])]),Object(a["E"])(Object(a["g"])("div",null,Object(a["z"])(e.mqtt.data.usys.deletedFile),513),[[a["B"],!1]])])})),me=Object(a["h"])({setup:function(){var e=o.use(),t=x.use(),n=Object(a["v"])(null),i=Object(a["v"])(""),c=Object(a["v"])(null),l=Object(a["u"])({files:[]}),s=Object(a["v"])(!1),u=Object(a["v"])("http://"+window.location.host+"/upload/"),r=function(){Z.a.get(u.value).then((function(e){e.data.files&&(l.files=e.data.files)}))},f=function(e){var t=e.target;t.files&&(n.value=t.files[0])},d=function(){if(n.value){var e=new FormData;e.append("file",n.value),s.value=!0,Z.a.post(u.value,e,{headers:{"Content-Type":"multipart/form-data"}}).finally((function(){s.value=!1,setTimeout((function(){r()}),500)}))}else alert("No file selected!")},b=function(e){t.publish("usys/delete",e,{qos:1})},p=function(e){t.publish("usys/update_firmware",e,{qos:1})};return Object(a["o"])((function(){r()})),Object(a["D"])((function(){t.data.usys.deletedFile&&r()})),Object(a["D"])((function(){t.data.usys.updateMsg.length>0&&setTimeout((function(){c.value&&(c.value.scrollTop=c.value.scrollHeight)}),100)})),{i18n:e,mqtt:t,fileChange:f,file:n,uploadFile:d,uploaded:l,uploadAddress:u,isUploading:s,deleteFile:b,runUpdateFile:p,updateInfo:i,progressDiv:c}}});n("aa6c");me.render=he,me.__scopeId="data-v-49e3f421";var we=me,ke=[{path:"/",name:"Home",component:te},{path:"/update_firmware",name:"UpdateFirmware",component:we}],qe=Object(_["a"])({history:Object(_["b"])(""),routes:ke}),Ue=qe;Object(a["c"])(M).use(Ue).mount("#app")},ce33:function(e,t,n){"use strict";n("b7e9")},edd4:function(e){e.exports=JSON.parse('{"UpdateFirmware":"Update Firmware","UpdatePackage":"Update Package","PkgDwLink":"Package download links","UpdateProgress":"Update Progress"}')}});
//# sourceMappingURL=app.660f6124.js.map