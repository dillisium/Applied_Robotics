{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Home.vue?35b4","webpack:///./src/views/UpdateFirmware.vue?bf4b","webpack:///./src/App.vue","webpack:///./src/plugins/i18nPlugin.ts","webpack:///./src/plugins/mqtt/data.ts","webpack:///./src/plugins/mqtt/receivers/usysReceivers.ts","webpack:///./src/plugins/mqtt/messageHandler.ts","webpack:///./src/plugins/mqttPlugin.ts","webpack:///./src/App.vue?1d14","webpack:///./src/App.vue?97f5","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?26af","webpack:///./src/views/Home.vue?c772","webpack:///./src/views/UpdateFirmware.vue","webpack:///./src/views/UpdateFirmware.vue?777a","webpack:///./src/views/UpdateFirmware.vue?045b","webpack:///./src/router/index.ts","webpack:///./src/main.ts","webpack:///./src/App.vue?2231"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","id","config","locale","messages","$t","this","i18nSymbol","I18nPlugin","provide","i18nConfig","i18n","lang","navigator","language","indexOf","console","log","use","Error","mqttConnected","managerOn","usys","isUpdating","deletedFile","updateProgress","updateMsg","dataCopy","JSON","stringify","getMqttDataCopy","parse","ansiUp","receivers","message","byteLength","toString","Math","random","msg","substring","ansi_to_html","messageReceivers","usysReceivers","messageHandler","topic","msgTopic","dataView","DataView","buffer","byteOffset","receiver","client","connect","address","end","clientId","substr","keepalive","will","payload","retain","qos","on","subscribe","assign","opts","unsubscribe","publish","Uint8Array","ArrayBuffer","DeviceSymbol","MqttPlugin","wsProtocol","location","protocol","host","device","setup","zh","en","render","class","style","type","fileChange","file","uploadFile","isUploading","uploaded","files","uploadedFile","runUpdateFile","link","deleteFile","mqtt","ref","updateInfo","progressDiv","uploadAddress","updateFileList","a","then","res","evt","target","formData","FormData","append","post","headers","catch","err","finally","setTimeout","alert","scrollTop","scrollHeight","__scopeId","routes","path","component","Home","UpdateFirmware","router","history","App","mount"],"mappings":"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","file":"js/app.660f6124.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=22971a06&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UpdateFirmware.vue?vue&type=style&index=0&id=49e3f421&lang=scss&scoped=true\"","<template>\n  <div id=\"app\">\n    <router-view />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\nimport MqttPlugin from \"@/plugins/mqttPlugin\";\nimport { defineComponent } from \"vue\";\nimport en from \"@/locales/en.json\";\nimport zh from \"@/locales/zh.json\";\n\nexport default defineComponent({\n  setup() {\n    I18nPlugin.provide({\n      locale: \"en\",\n      messages: {\n        zh: zh,\n        en: en\n      }\n    });\n    MqttPlugin.provide();\n  }\n});\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody {\n  overflow: hidden;\n  height: 100vh;\n  padding: 0px;\n  background-color: #e8f7ff;\n  background-attachment: fixed;\n  background-size: cover;\n}\n#app {\n  background-color: rgba($color: white, $alpha: 0.6);\n}\n\n.maincontent,\n.sidenav {\n  height: 100vh;\n}\n.sidenav {\n  min-width: 200px;\n  flex-grow: 0;\n  flex-shrink: 0;\n  border-right: solid gray 1px;\n  h1 {\n    background: #333333;\n    color: white;\n    padding: 14px 0px 14px 20px;\n    font-size: x-large;\n  }\n  padding: 0px;\n}\n#mqttConnection {\n  position: absolute;\n  right: 0;\n  top: 0;\n  height: 55px;\n  width: 3ex;\n  background: rgba($color: white, $alpha: 0.1);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: small;\n}\n.u-content {\n  min-width: 600px;\n  h2 {\n    background: rgb(0, 0, 0);\n    background: linear-gradient(\n      90deg,\n      rgba(51, 51, 51, 1) 0%,\n      rgba(255, 253, 253, 1) 100%\n    );\n    color: white;\n    padding: 15.5px;\n  }\n}\n</style>\n","import { ref, provide, inject, Ref } from \"vue\";\n\ninterface I18nConfig {\n  locale: string;\n  messages: {\n    [prop: string]: {\n      [prop: string]: string;\n    };\n  };\n}\n\ninterface I18n {\n  locale: Ref<string>;\n  messages: {\n    [prop: string]: {\n      [prop: string]: string;\n    };\n  };\n  $t: (key: string) => string;\n}\n\nconst createI18n = (config: I18nConfig) => ({\n  locale: ref(config.locale),\n  messages: config.messages,\n  $t(key: string) {\n    return this.messages[this.locale.value][key];\n  }\n});\n\nconst i18nSymbol = Symbol();\n\nconst I18nPlugin = {\n  provide: (i18nConfig: I18nConfig) => {\n    const i18n = createI18n(i18nConfig);\n    const lang = navigator.language.indexOf(\"zh\") >= 0 ? \"zh\" : \"en\";\n    //const lang = \"zh\";\n    console.log(lang);\n    i18n.locale.value = lang;\n\n    provide(i18nSymbol, i18n);\n  },\n  use: (): I18n => {\n    const i18n = inject(i18nSymbol) as I18n;\n    if (!i18n) throw new Error(\"No i18n provided!!!\");\n    return i18n;\n  }\n};\n\nexport default I18nPlugin;\n","export interface MqttData {\n  mqttConnected: boolean;\n  managerOn: boolean;\n  usys: {\n    isUpdating: boolean;\n    deletedFile: string;\n    updateProgress: number;\n    updateMsg: string;\n  };\n}\n\nconst data: MqttData = {\n  mqttConnected: false,\n  managerOn: false,\n  usys: {\n    isUpdating: false,\n    deletedFile: \"\",\n    updateProgress: 0,\n    updateMsg: \"\"\n  }\n};\n\nconst dataCopy = JSON.stringify(data);\n\nexport const getMqttDataCopy = () => {\n  return JSON.parse(dataCopy) as MqttData;\n};\n","import { MqttData } from \"@/plugins/mqtt/data\";\nimport { UsysSubTopic } from \"@/plugins/mqtt/topics\";\nimport AnsiUp from \"ansi_up\";\nconst ansiUp = new AnsiUp();\n\ntype Receivers = {\n  [key in UsysSubTopic]: (\n    data: MqttData,\n    message: Buffer,\n    dataView: DataView\n  ) => void;\n};\n\nconst receivers: Receivers = {\n  \"usys/run\": (data, message) => {\n    data.managerOn = message.byteLength > 0;\n  },\n  \"usys/deleted\": (data, message) => {\n    data.usys.deletedFile = message.toString(\"utf-8\") + \":\" + Math.random();\n  },\n  \"usys/updating\": (data, message) => {\n    const isUpdating = message.byteLength > 0;\n    data.usys.isUpdating = isUpdating;\n    if (isUpdating) {\n      data.usys.updateMsg = \"\";\n    }\n  },\n  \"usys/info\": (data, message) => {\n    let msg = message.toString();\n    if (msg.indexOf(\"\u001b]0;unitree\") === 0) {\n      msg = msg.substring(msg.indexOf(\"[\") - 1, msg.length - 1);\n    }\n    if (msg.indexOf(\"unitree@\") === 0) return;\n    data.usys.updateMsg += ansiUp.ansi_to_html(msg);\n  }\n};\n\nexport default receivers;\n","import { MqttData } from \"@/plugins/mqtt/data\";\nimport { SubTopic } from \"@/plugins/mqtt/topics\";\n\nimport usysReceivers from \"@/plugins/mqtt/receivers/usysReceivers\";\n// import AnsiUp from \"ansi_up\";\n// const ansiUp = new AnsiUp();\n\ntype Receivers = {\n  [key in SubTopic]: (\n    data: MqttData,\n    message: Buffer,\n    dataView: DataView\n  ) => void;\n};\n\nconst messageReceivers: Receivers = {\n  ...usysReceivers\n};\n\nexport default function messageHandler(\n  topic: string,\n  message: Buffer,\n  data: MqttData\n) {\n  const msgTopic = topic as SubTopic;\n  const dataView = new DataView(\n    message.buffer,\n    message.byteOffset,\n    message.byteLength\n  );\n  const receiver = messageReceivers[msgTopic];\n  if (receiver) receiver(data, message, dataView);\n  else console.log(message);\n}\n","import mqtt, {\n  MqttClient,\n  IClientSubscribeOptions,\n  IClientPublishOptions\n} from \"mqtt\";\n\nimport { provide, inject, reactive } from \"vue\";\nimport { SubTopic, PubTopic } from \"@/plugins/mqtt/topics\";\nimport { getMqttDataCopy, MqttData } from \"@/plugins/mqtt/data\";\nimport messageHandler from \"@/plugins/mqtt/messageHandler\";\n\ninterface Device {\n  data: MqttData;\n  connect: (address: string) => void;\n  subscribe: (\n    topic: SubTopic | SubTopic[],\n    opts: IClientSubscribeOptions\n  ) => void;\n  unsubscribe: (topic: SubTopic | SubTopic[]) => void;\n  publish: (\n    topic: PubTopic,\n    message: string | ArrayBuffer | Uint8Array,\n    opts: IClientPublishOptions\n  ) => void;\n}\n\nlet client = null as null | MqttClient;\n\nconst device: Device = {\n  data: reactive(getMqttDataCopy()),\n  connect(address: string) {\n    if (client) client.end();\n    const clientId =\n      \"UApp_\" +\n      Math.random()\n        .toString(16)\n        .substr(2, 8);\n    client = mqtt.connect(address, {\n      clientId: clientId,\n      keepalive: 5,\n      will: {\n        topic: \"appStatus\",\n        payload: \"disconnect_\" + clientId,\n        retain: true,\n        qos: 1\n      }\n    });\n    client.on(\"connect\", function() {\n      device.data.mqttConnected = true;\n      device.subscribe(\n        [\"usys/run\", \"usys/info\", \"usys/updating\", \"usys/deleted\"],\n        { qos: 1 }\n      );\n    });\n    client.on(\"message\", function(topic, message) {\n      messageHandler(topic, message, device.data);\n    });\n    client.on(\"close\", function() {\n      Object.assign(device.data, getMqttDataCopy());\n    });\n  },\n  subscribe(topic: SubTopic | SubTopic[], opts: IClientSubscribeOptions) {\n    client?.subscribe(topic, opts);\n  },\n  unsubscribe(topic: SubTopic | SubTopic[]) {\n    client?.unsubscribe(topic);\n  },\n  publish(\n    topic: PubTopic,\n    message: string | ArrayBuffer | Uint8Array,\n    opts: IClientPublishOptions\n  ) {\n    if (typeof message === \"string\" || message instanceof Uint8Array) {\n      client?.publish(topic, message as string | Buffer, opts);\n    } else if (message instanceof ArrayBuffer) {\n      client?.publish(topic, new Uint8Array(message) as Buffer);\n    }\n  }\n};\n\nconst DeviceSymbol = Symbol();\n\nconst MqttPlugin = {\n  provide: () => {\n    const wsProtocol =\n      window.location.protocol === \"https:\" ? \"wss://\" : \"ws://\";\n    if (process.env.NODE_ENV == \"development\") {\n      device.connect(wsProtocol + process.env.VUE_APP_DEVICE_ADDRESS + \"/mqtt\");\n    } else {\n      device.connect(wsProtocol + window.location.host + \"/mqtt\");\n    }\n\n    provide(DeviceSymbol, device);\n  },\n  use: (): Device => {\n    const device = inject(DeviceSymbol) as Device;\n    if (!device) throw new Error(\"No mqtt provided!!!\");\n    return device;\n  }\n};\n\nexport default MqttPlugin;\n","\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\nimport MqttPlugin from \"@/plugins/mqttPlugin\";\nimport { defineComponent } from \"vue\";\nimport en from \"@/locales/en.json\";\nimport zh from \"@/locales/zh.json\";\n\nexport default defineComponent({\n  setup() {\n    I18nPlugin.provide({\n      locale: \"en\",\n      messages: {\n        zh: zh,\n        en: en\n      }\n    });\n    MqttPlugin.provide();\n  }\n});\n","import { render } from \"./App.vue?vue&type=template&id=11604916\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=11604916&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"u-update\">\n    <div style=\"width: 100%; margin-bottom: 10px;\">\n      <h1 style=\"font-size:xx-large;\">{{ i18n.$t(\"UpdatePackage\") }}</h1>\n      <h3>\n        {{ i18n.$t(\"PkgDwLink\") }}:\n        <a>www.unitree.com</a>\n      </h3>\n    </div>\n    <div class=\"u-uploader\">\n      <div class=\"u-form\">\n        <div class=\"u-filename file\">\n          <input class=\"file-input\" type=\"file\" @change=\"fileChange\" />\n          <i class=\"fas fa-folder\"></i>\n          {{ file ? file.name : \"\" }}\n        </div>\n\n        <div class=\"u-btn\" @click=\"uploadFile\">\n          <i v-if=\"!isUploading\" class=\"fas fa-upload\"></i>\n          <i v-else class=\"fa fa-spinner fa-spin\"></i>\n        </div>\n      </div>\n      <div class=\"u-file-list\">\n        <div\n          class=\"u-file\"\n          v-for=\"uploadedFile in uploaded.files\"\n          :key=\"uploadedFile.name\"\n        >\n          <i class=\"fa fa-file\"></i>\n          {{ uploadedFile.name }}\n          <span class=\"u-file-btn\">\n            <i\n              class=\"fa fa-play\"\n              style=\"color:orange;\"\n              @click=\"runUpdateFile(uploadedFile.link)\"\n            ></i>\n            |\n            <i\n              class=\"fa fa-trash-alt\"\n              style=\"color:red\"\n              @click=\"deleteFile(uploadedFile.link)\"\n            ></i>\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"u-info\">\n      <h3 :style=\"mqtt.data.usys.isUpdating ? 'background-color: yellow;' : ''\">\n        <i class=\"fa fa-info-circle\"></i>\n        {{ i18n.$t(\"UpdateProgress\") }}\n        <i\n          class=\"fa fa-spinner fa-spin\"\n          style=\"float:right; margin:4px 0px;\"\n          v-if=\"mqtt.data.usys.isUpdating\"\n        />\n      </h3>\n      <div\n        class=\"u-progress\"\n        v-html=\"mqtt.data.usys.updateMsg\"\n        ref=\"progressDiv\"\n      ></div>\n    </div>\n    <div v-show=\"false\">{{ mqtt.data.usys.deletedFile }}</div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  ref,\n  reactive,\n  onMounted,\n  watchEffect,\n  Ref\n} from \"vue\";\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\nimport MqttPlugin from \"@/plugins/mqttPlugin\";\nimport axios from \"axios\";\n\nexport default defineComponent({\n  setup() {\n    const i18n = I18nPlugin.use();\n    const mqtt = MqttPlugin.use();\n    const file = ref(null as null | File);\n    const updateInfo = ref(\"\");\n    const progressDiv = ref(null) as Ref<null | HTMLDivElement>;\n    const uploaded = reactive({\n      files: [] as Array<{ name: string; link: string }>\n    });\n    const isUploading = ref(false);\n    const uploadAddress = ref(\n      \"http://\" +\n        (process.env.NODE_ENV === \"development\"\n          ? process.env.VUE_APP_DEVICE_ADDRESS\n          : window.location.host) +\n        \"/upload/\"\n    );\n    const updateFileList = () => {\n      axios.get(uploadAddress.value).then(res => {\n        if (res.data.files) uploaded.files = res.data.files;\n      });\n    };\n    const fileChange = (evt: Event) => {\n      const target = evt.target as HTMLInputElement;\n      if (!target.files) return;\n      file.value = target.files[0];\n    };\n\n    const uploadFile = () => {\n      if (!file.value) {\n        alert(\"No file selected!\");\n        return;\n      }\n      const formData = new FormData();\n      formData.append(\"file\", file.value);\n      isUploading.value = true;\n      axios\n        .post(uploadAddress.value, formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        })\n        .finally(() => {\n          isUploading.value = false;\n          setTimeout(() => {\n            updateFileList();\n          }, 500);\n        });\n    };\n    const deleteFile = (name: string) => {\n      mqtt.publish(\"usys/delete\", name, { qos: 1 });\n    };\n\n    const runUpdateFile = (name: string) => {\n      mqtt.publish(\"usys/update_package\", name, { qos: 1 });\n    };\n\n    onMounted(() => {\n      updateFileList();\n    });\n    watchEffect(() => {\n      if (mqtt.data.usys.deletedFile) {\n        updateFileList();\n      }\n    });\n    watchEffect(() => {\n      if (mqtt.data.usys.updateMsg.length > 0) {\n        setTimeout(() => {\n          if (progressDiv.value)\n            progressDiv.value.scrollTop = progressDiv.value.scrollHeight;\n        }, 100);\n      }\n    });\n\n    return {\n      i18n,\n      mqtt,\n      fileChange,\n      file,\n      uploadFile,\n      uploaded,\n      uploadAddress,\n      isUploading,\n      deleteFile,\n      runUpdateFile,\n      updateInfo,\n      progressDiv\n    };\n  }\n});\n</script>\n<style lang=\"scss\" scoped>\n.u-update {\n  height: 100vh;\n  padding: 30px;\n  display: flex;\n  flex-wrap: wrap;\n  .u-uploader {\n    width: 40%;\n    margin-bottom: 100px;\n    margin-right: 1vw;\n    height: calc(100vh - 150px);\n    background-color: white;\n    display: flex;\n    flex-direction: column;\n    .u-form {\n      display: flex;\n      justify-content: space-between;\n      .u-filename {\n        height: 30px;\n        padding: 3px;\n        overflow: hidden;\n        box-shadow: inset 0 0 2px #000000;\n        border-radius: 3px;\n        margin-right: 2px;\n        flex-grow: 1;\n        i {\n          padding: 4px;\n          border-right: 1px solid gray;\n          margin-right: 5px;\n        }\n      }\n      .u-btn {\n        height: 30px;\n        background-color: rgba($color: #000000, $alpha: 0.1);\n        min-width: 30px;\n        border-radius: 4px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-grow: 0;\n        cursor: pointer;\n        &:hover {\n          background-color: orange;\n        }\n      }\n    }\n    .u-file-list {\n      padding: 10px;\n      box-shadow: inset 0 0 4px #000000;\n      flex-grow: 1;\n      .u-file {\n        .u-file-btn {\n          cursor: pointer;\n          float: right;\n        }\n      }\n    }\n\n    & > div {\n      width: 100%;\n      padding: 2px 0px;\n    }\n  }\n  .u-info {\n    width: 40%;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    height: calc(100vh - 150px);\n    h3 {\n      background: lightgray;\n      height: 30px;\n      padding: 3px 10px;\n      border-radius: 5px;\n      margin: 2px 0px;\n    }\n    .u-progress {\n      box-shadow: inset 0 0 4px #000000;\n      background: white;\n      padding: 10px;\n      flex-grow: 1;\n      overflow-y: scroll;\n      overflow-x: hidden;\n      white-space: pre;\n      font-family: monospace;\n      font-size: small;\n    }\n  }\n}\n</style>\n","\nimport {\n  defineComponent,\n  ref,\n  reactive,\n  onMounted,\n  watchEffect,\n  Ref\n} from \"vue\";\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\nimport MqttPlugin from \"@/plugins/mqttPlugin\";\nimport axios from \"axios\";\n\nexport default defineComponent({\n  setup() {\n    const i18n = I18nPlugin.use();\n    const mqtt = MqttPlugin.use();\n    const file = ref(null as null | File);\n    const updateInfo = ref(\"\");\n    const progressDiv = ref(null) as Ref<null | HTMLDivElement>;\n    const uploaded = reactive({\n      files: [] as Array<{ name: string; link: string }>\n    });\n    const isUploading = ref(false);\n    const uploadAddress = ref(\n      \"http://\" +\n        (process.env.NODE_ENV === \"development\"\n          ? process.env.VUE_APP_DEVICE_ADDRESS\n          : window.location.host) +\n        \"/upload/\"\n    );\n    const updateFileList = () => {\n      axios.get(uploadAddress.value).then(res => {\n        if (res.data.files) uploaded.files = res.data.files;\n      });\n    };\n    const fileChange = (evt: Event) => {\n      const target = evt.target as HTMLInputElement;\n      if (!target.files) return;\n      file.value = target.files[0];\n    };\n\n    const uploadFile = () => {\n      if (!file.value) {\n        alert(\"No file selected!\");\n        return;\n      }\n      const formData = new FormData();\n      formData.append(\"file\", file.value);\n      isUploading.value = true;\n      axios\n        .post(uploadAddress.value, formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        })\n        .finally(() => {\n          isUploading.value = false;\n          setTimeout(() => {\n            updateFileList();\n          }, 500);\n        });\n    };\n    const deleteFile = (name: string) => {\n      mqtt.publish(\"usys/delete\", name, { qos: 1 });\n    };\n\n    const runUpdateFile = (name: string) => {\n      mqtt.publish(\"usys/update_package\", name, { qos: 1 });\n    };\n\n    onMounted(() => {\n      updateFileList();\n    });\n    watchEffect(() => {\n      if (mqtt.data.usys.deletedFile) {\n        updateFileList();\n      }\n    });\n    watchEffect(() => {\n      if (mqtt.data.usys.updateMsg.length > 0) {\n        setTimeout(() => {\n          if (progressDiv.value)\n            progressDiv.value.scrollTop = progressDiv.value.scrollHeight;\n        }, 100);\n      }\n    });\n\n    return {\n      i18n,\n      mqtt,\n      fileChange,\n      file,\n      uploadFile,\n      uploaded,\n      uploadAddress,\n      isUploading,\n      deleteFile,\n      runUpdateFile,\n      updateInfo,\n      progressDiv\n    };\n  }\n});\n","import { render } from \"./Home.vue?vue&type=template&id=22971a06&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=22971a06&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-22971a06\"\n\nexport default script","<template>\n  <div class=\"u-update\">\n    <div style=\"width: 100%; margin-bottom: 10px;\">\n      <h1 style=\"font-size:xx-large;\">{{ i18n.$t(\"UpdateFirmware\") }}</h1>\n      <h3>\n        {{ i18n.$t(\"PkgDwLink\") }}:\n        <a>www.unitree.com</a>\n      </h3>\n    </div>\n    <div class=\"u-uploader\">\n      <div class=\"u-form\">\n        <div class=\"u-filename file\">\n          <input class=\"file-input\" type=\"file\" @change=\"fileChange\" />\n          <i class=\"fas fa-folder\"></i>\n          {{ file ? file.name : \"\" }}\n        </div>\n\n        <div class=\"u-btn\" @click=\"uploadFile\">\n          <i v-if=\"!isUploading\" class=\"fas fa-upload\"></i>\n          <i v-else class=\"fa fa-spinner fa-spin\"></i>\n        </div>\n      </div>\n      <div class=\"u-file-list\">\n        <div\n          class=\"u-file\"\n          v-for=\"uploadedFile in uploaded.files\"\n          :key=\"uploadedFile.name\"\n        >\n          <i class=\"fa fa-file\"></i>\n          {{ uploadedFile.name }}\n          <span class=\"u-file-btn\">\n            <i\n              class=\"fa fa-play\"\n              style=\"color:orange;\"\n              @click=\"runUpdateFile(uploadedFile.link)\"\n            ></i>\n            |\n            <i\n              class=\"fa fa-trash-alt\"\n              style=\"color:red\"\n              @click=\"deleteFile(uploadedFile.link)\"\n            ></i>\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"u-info\">\n      <h3 :style=\"mqtt.data.usys.isUpdating ? 'background-color: yellow;' : ''\">\n        <i class=\"fa fa-info-circle\"></i>\n        {{ i18n.$t(\"UpdateProgress\") }}\n        <i\n          class=\"fa fa-spinner fa-spin\"\n          style=\"float:right; margin:4px 0px;\"\n          v-if=\"mqtt.data.usys.isUpdating\"\n        />\n      </h3>\n      <div\n        class=\"u-progress\"\n        v-html=\"mqtt.data.usys.updateMsg\"\n        ref=\"progressDiv\"\n      ></div>\n    </div>\n    <div v-show=\"false\">{{ mqtt.data.usys.deletedFile }}</div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  ref,\n  reactive,\n  onMounted,\n  watchEffect,\n  Ref\n} from \"vue\";\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\nimport MqttPlugin from \"@/plugins/mqttPlugin\";\nimport axios from \"axios\";\n\nexport default defineComponent({\n  setup() {\n    const i18n = I18nPlugin.use();\n    const mqtt = MqttPlugin.use();\n    const file = ref(null as null | File);\n    const updateInfo = ref(\"\");\n    const progressDiv = ref(null) as Ref<null | HTMLDivElement>;\n    const uploaded = reactive({\n      files: [] as Array<{ name: string; link: string }>\n    });\n    const isUploading = ref(false);\n    const uploadAddress = ref(\n      \"http://\" +\n        (process.env.NODE_ENV === \"development\"\n          ? process.env.VUE_APP_DEVICE_ADDRESS\n          : window.location.host) +\n        \"/upload/\"\n    );\n    const updateFileList = () => {\n      axios.get(uploadAddress.value).then(res => {\n        if (res.data.files) uploaded.files = res.data.files;\n      });\n    };\n    const fileChange = (evt: Event) => {\n      const target = evt.target as HTMLInputElement;\n      if (!target.files) return;\n      file.value = target.files[0];\n    };\n\n    const uploadFile = () => {\n      if (!file.value) {\n        alert(\"No file selected!\");\n        return;\n      }\n      const formData = new FormData();\n      formData.append(\"file\", file.value);\n      isUploading.value = true;\n      axios\n        .post(uploadAddress.value, formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        })\n        .finally(() => {\n          isUploading.value = false;\n          setTimeout(() => {\n            updateFileList();\n          }, 500);\n        });\n    };\n    const deleteFile = (name: string) => {\n      mqtt.publish(\"usys/delete\", name, { qos: 1 });\n    };\n\n    const runUpdateFile = (name: string) => {\n      mqtt.publish(\"usys/update_firmware\", name, { qos: 1 });\n    };\n\n    onMounted(() => {\n      updateFileList();\n    });\n    watchEffect(() => {\n      if (mqtt.data.usys.deletedFile) {\n        updateFileList();\n      }\n    });\n    watchEffect(() => {\n      if (mqtt.data.usys.updateMsg.length > 0) {\n        setTimeout(() => {\n          if (progressDiv.value)\n            progressDiv.value.scrollTop = progressDiv.value.scrollHeight;\n        }, 100);\n      }\n    });\n\n    return {\n      i18n,\n      mqtt,\n      fileChange,\n      file,\n      uploadFile,\n      uploaded,\n      uploadAddress,\n      isUploading,\n      deleteFile,\n      runUpdateFile,\n      updateInfo,\n      progressDiv\n    };\n  }\n});\n</script>\n<style lang=\"scss\" scoped>\n.u-update {\n  height: 100vh;\n  padding: 30px;\n  display: flex;\n  flex-wrap: wrap;\n  .u-uploader {\n    width: 40%;\n    margin-bottom: 100px;\n    margin-right: 1vw;\n    height: calc(100vh - 150px);\n    background-color: white;\n    display: flex;\n    flex-direction: column;\n    .u-form {\n      display: flex;\n      justify-content: space-between;\n      .u-filename {\n        height: 30px;\n        padding: 3px;\n        overflow: hidden;\n        box-shadow: inset 0 0 2px #000000;\n        border-radius: 3px;\n        margin-right: 2px;\n        flex-grow: 1;\n        i {\n          padding: 4px;\n          border-right: 1px solid gray;\n          margin-right: 5px;\n        }\n      }\n      .u-btn {\n        height: 30px;\n        background-color: rgba($color: #000000, $alpha: 0.1);\n        min-width: 30px;\n        border-radius: 4px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-grow: 0;\n        cursor: pointer;\n        &:hover {\n          background-color: orange;\n        }\n      }\n    }\n    .u-file-list {\n      padding: 10px;\n      box-shadow: inset 0 0 4px #000000;\n      flex-grow: 1;\n      .u-file {\n        .u-file-btn {\n          cursor: pointer;\n          float: right;\n        }\n      }\n    }\n\n    & > div {\n      width: 100%;\n      padding: 2px 0px;\n    }\n  }\n  .u-info {\n    width: 40%;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    height: calc(100vh - 150px);\n    h3 {\n      background: lightgray;\n      height: 30px;\n      padding: 3px 10px;\n      border-radius: 5px;\n      margin: 2px 0px;\n    }\n    .u-progress {\n      box-shadow: inset 0 0 4px #000000;\n      background: white;\n      padding: 10px;\n      flex-grow: 1;\n      overflow-y: scroll;\n      overflow-x: hidden;\n      white-space: pre;\n      font-family: monospace;\n      font-size: small;\n    }\n  }\n}\n</style>\n","\nimport {\n  defineComponent,\n  ref,\n  reactive,\n  onMounted,\n  watchEffect,\n  Ref\n} from \"vue\";\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\nimport MqttPlugin from \"@/plugins/mqttPlugin\";\nimport axios from \"axios\";\n\nexport default defineComponent({\n  setup() {\n    const i18n = I18nPlugin.use();\n    const mqtt = MqttPlugin.use();\n    const file = ref(null as null | File);\n    const updateInfo = ref(\"\");\n    const progressDiv = ref(null) as Ref<null | HTMLDivElement>;\n    const uploaded = reactive({\n      files: [] as Array<{ name: string; link: string }>\n    });\n    const isUploading = ref(false);\n    const uploadAddress = ref(\n      \"http://\" +\n        (process.env.NODE_ENV === \"development\"\n          ? process.env.VUE_APP_DEVICE_ADDRESS\n          : window.location.host) +\n        \"/upload/\"\n    );\n    const updateFileList = () => {\n      axios.get(uploadAddress.value).then(res => {\n        if (res.data.files) uploaded.files = res.data.files;\n      });\n    };\n    const fileChange = (evt: Event) => {\n      const target = evt.target as HTMLInputElement;\n      if (!target.files) return;\n      file.value = target.files[0];\n    };\n\n    const uploadFile = () => {\n      if (!file.value) {\n        alert(\"No file selected!\");\n        return;\n      }\n      const formData = new FormData();\n      formData.append(\"file\", file.value);\n      isUploading.value = true;\n      axios\n        .post(uploadAddress.value, formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        })\n        .finally(() => {\n          isUploading.value = false;\n          setTimeout(() => {\n            updateFileList();\n          }, 500);\n        });\n    };\n    const deleteFile = (name: string) => {\n      mqtt.publish(\"usys/delete\", name, { qos: 1 });\n    };\n\n    const runUpdateFile = (name: string) => {\n      mqtt.publish(\"usys/update_firmware\", name, { qos: 1 });\n    };\n\n    onMounted(() => {\n      updateFileList();\n    });\n    watchEffect(() => {\n      if (mqtt.data.usys.deletedFile) {\n        updateFileList();\n      }\n    });\n    watchEffect(() => {\n      if (mqtt.data.usys.updateMsg.length > 0) {\n        setTimeout(() => {\n          if (progressDiv.value)\n            progressDiv.value.scrollTop = progressDiv.value.scrollHeight;\n        }, 100);\n      }\n    });\n\n    return {\n      i18n,\n      mqtt,\n      fileChange,\n      file,\n      uploadFile,\n      uploaded,\n      uploadAddress,\n      isUploading,\n      deleteFile,\n      runUpdateFile,\n      updateInfo,\n      progressDiv\n    };\n  }\n});\n","import { render } from \"./UpdateFirmware.vue?vue&type=template&id=49e3f421&scoped=true\"\nimport script from \"./UpdateFirmware.vue?vue&type=script&lang=ts\"\nexport * from \"./UpdateFirmware.vue?vue&type=script&lang=ts\"\n\nimport \"./UpdateFirmware.vue?vue&type=style&index=0&id=49e3f421&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-49e3f421\"\n\nexport default script","import { createRouter, createWebHistory, RouteRecordRaw } from \"vue-router\";\nimport Home from \"../views/Home.vue\";\nimport UpdateFirmware from \"../views/UpdateFirmware.vue\";\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: \"/\",\n    name: \"Home\",\n    component: Home\n  },\n  {\n    path: \"/update_firmware\",\n    name: \"UpdateFirmware\",\n    component: UpdateFirmware\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\nexport default router;\n","import \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport \"bulma/css/bulma.min.css\";\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\n\ncreateApp(App)\n  .use(router)\n  .mount(\"#app\");\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=11604916&lang=scss\""],"sourceRoot":""}