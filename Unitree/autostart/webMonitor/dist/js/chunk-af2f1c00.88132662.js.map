{"version":3,"sources":["webpack:///./src/components/VirtualGamepad.vue","webpack:///./src/components/VirtualGamepad.vue?c092","webpack:///./src/components/VirtualGamepad.vue?b82b","webpack:///./src/components/AiSwitchButton.vue?e7c4","webpack:///./src/views/Vision.vue","webpack:///./src/components/AiSwitchButton.vue","webpack:///./src/components/AiSwitchButton.vue?15f4","webpack:///./src/components/AiSwitchButton.vue?3480","webpack:///./src/views/Vision.vue?f5c7","webpack:///./src/views/Vision.vue?72b0","webpack:///./src/components/VirtualGamepad.vue?e0c8","webpack:///./src/views/Vision.vue?4548"],"names":["class","keyboardJoystickOn","usbJoystickOn","style","leftRodStyle","extendButtonOn","rightRodStyle","handleKey","i18n","$t","usbStickAlertOn","name","props","Boolean","setup","pros","context","use","lx","ly","rx","ry","keys","wPressed","aPressed","sPressed","dPressed","upPressed","leftPressed","downPressed","rightPressed","spacePressed","left","value","top","key","emit","keyListener","evt","updateValue","type","gamepadOnListener","setTimeout","gamepadOffListener","keyUpdateInterval","changeRodValue","prevValue","posPressed","negPressed","updateStep","Math","abs","updatedValue","rangedValue","window","addEventListener","setInterval","gamepad","navigator","getGamepads","axes","length","removeEventListener","clearInterval","render","__scopeId","to","gamepadOn","handleStickData","handleActionData","aiSelection","mqtt","data","vision","aiMode","camId","resetSelection","aiButtonUpdate","wsAddress","wsRootAddress","size","offset","fov","handleClick","String","components","VirtualGamepad","VideoProjectionStream","VideoStream","AiSwitchButton","wsProtocol","location","protocol","host","publish","qos","retain","floats","Float32Array","buffer","console","log","subscribe","unsubscribe"],"mappings":"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","file":"js/chunk-af2f1c00.88132662.js","sourcesContent":["<template>\n  <div\n    class=\"KeyboardJoystick\"\n    :class=\"{\n      stickOn: keyboardJoystickOn || usbJoystickOn\n    }\"\n  >\n    <div class=\"JoyStick\" v-if=\"keyboardJoystickOn || usbJoystickOn\">\n      <div class=\"key up\" v-if=\"!usbJoystickOn\">W</div>\n      <div class=\"key left\" v-if=\"!usbJoystickOn\">A</div>\n      <div class=\"key right\" v-if=\"!usbJoystickOn\">D</div>\n      <div class=\"key down\" v-if=\"!usbJoystickOn\">S</div>\n      <div class=\"rod\" :style=\"leftRodStyle\"></div>\n    </div>\n\n    <div class=\"extendButton\" @click=\"extendButtonOn = !extendButtonOn\">\n      <i class=\"fa fa-angle-down\" v-if=\"extendButtonOn\"></i>\n      <i class=\"fa fa-angle-up\" v-else></i>\n    </div>\n\n    <div class=\"JoyStick\" v-if=\"keyboardJoystickOn || usbJoystickOn\">\n      <div class=\"key up\" v-if=\"!usbJoystickOn\">\n        <i class=\"fa fa-angle-up\"></i>\n      </div>\n      <div class=\"key left\" v-if=\"!usbJoystickOn\">\n        <i class=\"fa fa-angle-left\"></i>\n      </div>\n      <div class=\"key right\" v-if=\"!usbJoystickOn\">\n        <i class=\"fa fa-angle-right\"></i>\n      </div>\n      <div class=\"key down\" v-if=\"!usbJoystickOn\">\n        <i class=\"fa fa-angle-down\"></i>\n      </div>\n      <div class=\"rod\" :style=\"rightRodStyle\"></div>\n    </div>\n    <div class=\"extendMenu\" :class=\"{ extended: extendButtonOn }\">\n      <div class=\"f-button\" @click=\"handleKey('dance1')\">\n        {{ i18n.$t(\"Dance1\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('dance2')\">\n        {{ i18n.$t(\"Dance2\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('straightHand1')\">\n        {{ i18n.$t(\"Praying\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('damping')\">\n        {{ i18n.$t(\"Damping\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('standUp')\">\n        {{ i18n.$t(\"StandUp\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('standDown')\">\n        {{ i18n.$t(\"StandDown\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('recoverStand')\">\n        {{ i18n.$t(\"Recover\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('stand')\">\n        {{ i18n.$t(\"Stand\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('walk')\">\n        {{ i18n.$t(\"Walk\") }}\n      </div>\n      <div class=\"f-button\" @click=\"handleKey('run')\">{{ i18n.$t(\"Run\") }}</div>\n      <div class=\"f-button\" @click=\"handleKey('climb')\">\n        {{ i18n.$t(\"Climb\") }}\n      </div>\n      <div class=\"f-button\"></div>\n    </div>\n    <div class=\"usbStickAlert\" v-if=\"usbStickAlertOn\">\n      <i class=\"fa fa-gamepad\"></i>&nbsp; {{ i18n.$t(\"USBGamepadOn\") }}\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  ref,\n  computed,\n  onMounted,\n  onBeforeUnmount\n} from \"vue\";\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\n\nexport default defineComponent({\n  name: \"KeyboardJoystick\",\n  props: {\n    keyboardJoystickOn: Boolean\n  },\n  setup(pros, context) {\n    const i18n = I18nPlugin.use();\n    const usbJoystickOn = ref(false);\n    const usbStickAlertOn = ref(false);\n    const lx = ref(0);\n    const ly = ref(0);\n    const rx = ref(0);\n    const ry = ref(0);\n\n    const extendButtonOn = ref(false);\n    const keys = {\n      wPressed: 0,\n      aPressed: 0,\n      sPressed: 0,\n      dPressed: 0,\n      upPressed: 0,\n      leftPressed: 0,\n      downPressed: 0,\n      rightPressed: 0,\n      spacePressed: 0\n    };\n    const leftRodStyle = computed(() => {\n      return {\n        left: \"calc(\" + ((1 + lx.value) * 35 + 15) + \"% - 15px)\",\n        top: \"calc(\" + ((1 - ly.value) * 35 + 15) + \"% - 15px)\"\n      };\n    });\n    const rightRodStyle = computed(() => {\n      return {\n        left: \"calc(\" + ((1 + rx.value) * 35 + 15) + \"% - 15px)\",\n        top: \"calc(\" + ((1 - ry.value) * 35 + 15) + \"% - 15px)\"\n      };\n    });\n    const handleKey = (key: string) => {\n      context.emit(\"key-update\", key);\n    };\n\n    const keyListener = (evt: KeyboardEvent) => {\n      const updateValue = evt.type === \"keydown\" ? 1 : 0;\n      switch (evt.key) {\n        case \" \":\n          keys.spacePressed = updateValue;\n          break;\n        case \"w\":\n          keys.wPressed = updateValue;\n          break;\n        case \"a\":\n          keys.aPressed = updateValue;\n          break;\n        case \"s\":\n          keys.sPressed = updateValue;\n          break;\n        case \"d\":\n          keys.dPressed = updateValue;\n          break;\n        case \"ArrowUp\":\n          keys.upPressed = updateValue;\n          break;\n        case \"ArrowLeft\":\n          keys.leftPressed = updateValue;\n          break;\n        case \"ArrowDown\":\n          keys.downPressed = updateValue;\n          break;\n        case \"ArrowRight\":\n          keys.rightPressed = updateValue;\n          break;\n        default:\n          break;\n      }\n    };\n    const gamepadOnListener = () => {\n      usbJoystickOn.value = true;\n      usbStickAlertOn.value = true;\n      setTimeout(() => {\n        usbStickAlertOn.value = false;\n      }, 3000);\n    };\n    const gamepadOffListener = () => {\n      usbJoystickOn.value = false;\n    };\n    let keyUpdateInterval = 0;\n    const changeRodValue = (\n      prevValue: number,\n      posPressed: number,\n      negPressed: number\n    ) => {\n      const updateStep = Math.abs(prevValue) * 0.08 + 0.01;\n      const updatedValue =\n        prevValue + posPressed * updateStep - negPressed * updateStep;\n      const rangedValue =\n        updatedValue > 1 ? 1 : updatedValue < -1 ? -1 : updatedValue;\n      if (!keys.spacePressed && !posPressed && !negPressed) return 0;\n      else return rangedValue;\n    };\n\n    onMounted(() => {\n      window.addEventListener(\"keydown\", keyListener);\n      window.addEventListener(\"keyup\", keyListener);\n      window.addEventListener(\"gamepadconnected\", gamepadOnListener);\n      window.addEventListener(\"gamepaddisconnected\", gamepadOffListener);\n      keyUpdateInterval = window.setInterval(() => {\n        if (usbJoystickOn.value) {\n          const gamepad = navigator.getGamepads()[0];\n          if (gamepad && gamepad.axes.length === 4) {\n            lx.value = gamepad.axes[0];\n            ly.value = -gamepad.axes[1];\n            rx.value = gamepad.axes[2];\n            ry.value = -gamepad.axes[3];\n            context.emit(\"stick-update\", {\n              lx: lx.value,\n              ly: ly.value,\n              rx: rx.value,\n              ry: ry.value\n            });\n          }\n        } else if (pros.keyboardJoystickOn) {\n          lx.value = changeRodValue(lx.value, keys.dPressed, keys.aPressed);\n          ly.value = changeRodValue(ly.value, keys.wPressed, keys.sPressed);\n          rx.value = changeRodValue(\n            rx.value,\n            keys.rightPressed,\n            keys.leftPressed\n          );\n          ry.value = changeRodValue(ry.value, keys.upPressed, keys.downPressed);\n          context.emit(\"stick-update\", {\n            lx: lx.value,\n            ly: ly.value,\n            rx: rx.value,\n            ry: ry.value\n          });\n        }\n      }, 30);\n    });\n    onBeforeUnmount(() => {\n      window.removeEventListener(\"keydown\", keyListener);\n      window.removeEventListener(\"keyup\", keyListener);\n      window.removeEventListener(\"gamepadconnected\", gamepadOnListener);\n      window.removeEventListener(\"gamepaddisconnected\", gamepadOffListener);\n      window.clearInterval(keyUpdateInterval);\n    });\n    return {\n      lx,\n      ly,\n      rx,\n      ry,\n      rightRodStyle,\n      leftRodStyle,\n      extendButtonOn,\n      handleKey,\n      i18n,\n      usbJoystickOn,\n      usbStickAlertOn\n    };\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.KeyboardJoystick {\n  position: absolute;\n  bottom: 20px;\n  height: 0px;\n  width: 100%;\n  padding: 0px 30px;\n  display: flex;\n  justify-content: space-evenly;\n  &.stickOn {\n    justify-content: space-between;\n  }\n  .extendMenu {\n    position: absolute;\n    bottom: -300px;\n    overflow: hidden;\n    width: 400px;\n    left: calc(50% - 200px);\n    background-color: rgba($color: black, $alpha: 0.3);\n    box-shadow: white 2px 2px 2px;\n    border-radius: 5px;\n    flex-wrap: wrap;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 2px;\n    transition: all 0.5s ease-in;\n    &.extended {\n      bottom: max(160px, calc(50vh - 200px));\n    }\n\n    .f-button {\n      width: 182px;\n      text-align: center;\n      margin: 2px;\n      color: white;\n      background-color: rgba($color: black, $alpha: 0.5);\n      height: 35px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n  }\n  .usbStickAlert {\n    position: absolute;\n    bottom: 40vh;\n    overflow: hidden;\n    width: 200px;\n    height: 50px;\n    left: calc(50% - 100px);\n    background: rgba($color: black, $alpha: 0.3);\n    color: orange;\n    box-shadow: 1px 1px 1px black;\n    border-radius: 5px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .JoyStick {\n    height: 150px;\n    width: 150px;\n    background: rgba($color: black, $alpha: 0.2);\n    margin-top: -180px;\n    border-radius: 50%;\n    position: relative;\n    .rod {\n      height: 30px;\n      width: 30px;\n      border-radius: 50%;\n      background: rgba($color: red, $alpha: 0.5);\n      z-index: 10;\n      position: absolute;\n      transition: all 0.05s;\n    }\n    .key {\n      background: black;\n      color: white;\n      height: 20px;\n      width: 20px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: absolute;\n      border-radius: 4px;\n      &.up {\n        top: 10px;\n        left: 65px;\n      }\n      &.left {\n        left: 10px;\n        top: 65px;\n      }\n      &.right {\n        right: 10px;\n        top: 65px;\n      }\n      &.down {\n        bottom: 10px;\n        left: 65px;\n      }\n    }\n  }\n  .extendButton {\n    height: 3ex;\n    width: 3ex;\n    z-index: 1000;\n    margin-top: -80px;\n    color: white;\n    font-size: 3ex;\n    background: rgba($color: black, $alpha: 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n  }\n  .sideButtons {\n    position: absolute;\n    bottom: 200px;\n    margin: 20px;\n    display: flex;\n    flex-direction: column;\n    .sideButton {\n      margin: 0.5ex;\n      color: black;\n      text-shadow: white 2px 2px 2px;\n      span {\n        text-shadow: none;\n        background: rgba($color: black, $alpha: 0.5);\n        display: inline-block;\n        height: 5ex;\n        width: 5ex;\n        border-radius: 50%;\n        text-align: center;\n        color: white;\n        padding-top: 1ex;\n      }\n    }\n  }\n}\n</style>\n","\nimport {\n  defineComponent,\n  ref,\n  computed,\n  onMounted,\n  onBeforeUnmount\n} from \"vue\";\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\n\nexport default defineComponent({\n  name: \"KeyboardJoystick\",\n  props: {\n    keyboardJoystickOn: Boolean\n  },\n  setup(pros, context) {\n    const i18n = I18nPlugin.use();\n    const usbJoystickOn = ref(false);\n    const usbStickAlertOn = ref(false);\n    const lx = ref(0);\n    const ly = ref(0);\n    const rx = ref(0);\n    const ry = ref(0);\n\n    const extendButtonOn = ref(false);\n    const keys = {\n      wPressed: 0,\n      aPressed: 0,\n      sPressed: 0,\n      dPressed: 0,\n      upPressed: 0,\n      leftPressed: 0,\n      downPressed: 0,\n      rightPressed: 0,\n      spacePressed: 0\n    };\n    const leftRodStyle = computed(() => {\n      return {\n        left: \"calc(\" + ((1 + lx.value) * 35 + 15) + \"% - 15px)\",\n        top: \"calc(\" + ((1 - ly.value) * 35 + 15) + \"% - 15px)\"\n      };\n    });\n    const rightRodStyle = computed(() => {\n      return {\n        left: \"calc(\" + ((1 + rx.value) * 35 + 15) + \"% - 15px)\",\n        top: \"calc(\" + ((1 - ry.value) * 35 + 15) + \"% - 15px)\"\n      };\n    });\n    const handleKey = (key: string) => {\n      context.emit(\"key-update\", key);\n    };\n\n    const keyListener = (evt: KeyboardEvent) => {\n      const updateValue = evt.type === \"keydown\" ? 1 : 0;\n      switch (evt.key) {\n        case \" \":\n          keys.spacePressed = updateValue;\n          break;\n        case \"w\":\n          keys.wPressed = updateValue;\n          break;\n        case \"a\":\n          keys.aPressed = updateValue;\n          break;\n        case \"s\":\n          keys.sPressed = updateValue;\n          break;\n        case \"d\":\n          keys.dPressed = updateValue;\n          break;\n        case \"ArrowUp\":\n          keys.upPressed = updateValue;\n          break;\n        case \"ArrowLeft\":\n          keys.leftPressed = updateValue;\n          break;\n        case \"ArrowDown\":\n          keys.downPressed = updateValue;\n          break;\n        case \"ArrowRight\":\n          keys.rightPressed = updateValue;\n          break;\n        default:\n          break;\n      }\n    };\n    const gamepadOnListener = () => {\n      usbJoystickOn.value = true;\n      usbStickAlertOn.value = true;\n      setTimeout(() => {\n        usbStickAlertOn.value = false;\n      }, 3000);\n    };\n    const gamepadOffListener = () => {\n      usbJoystickOn.value = false;\n    };\n    let keyUpdateInterval = 0;\n    const changeRodValue = (\n      prevValue: number,\n      posPressed: number,\n      negPressed: number\n    ) => {\n      const updateStep = Math.abs(prevValue) * 0.08 + 0.01;\n      const updatedValue =\n        prevValue + posPressed * updateStep - negPressed * updateStep;\n      const rangedValue =\n        updatedValue > 1 ? 1 : updatedValue < -1 ? -1 : updatedValue;\n      if (!keys.spacePressed && !posPressed && !negPressed) return 0;\n      else return rangedValue;\n    };\n\n    onMounted(() => {\n      window.addEventListener(\"keydown\", keyListener);\n      window.addEventListener(\"keyup\", keyListener);\n      window.addEventListener(\"gamepadconnected\", gamepadOnListener);\n      window.addEventListener(\"gamepaddisconnected\", gamepadOffListener);\n      keyUpdateInterval = window.setInterval(() => {\n        if (usbJoystickOn.value) {\n          const gamepad = navigator.getGamepads()[0];\n          if (gamepad && gamepad.axes.length === 4) {\n            lx.value = gamepad.axes[0];\n            ly.value = -gamepad.axes[1];\n            rx.value = gamepad.axes[2];\n            ry.value = -gamepad.axes[3];\n            context.emit(\"stick-update\", {\n              lx: lx.value,\n              ly: ly.value,\n              rx: rx.value,\n              ry: ry.value\n            });\n          }\n        } else if (pros.keyboardJoystickOn) {\n          lx.value = changeRodValue(lx.value, keys.dPressed, keys.aPressed);\n          ly.value = changeRodValue(ly.value, keys.wPressed, keys.sPressed);\n          rx.value = changeRodValue(\n            rx.value,\n            keys.rightPressed,\n            keys.leftPressed\n          );\n          ry.value = changeRodValue(ry.value, keys.upPressed, keys.downPressed);\n          context.emit(\"stick-update\", {\n            lx: lx.value,\n            ly: ly.value,\n            rx: rx.value,\n            ry: ry.value\n          });\n        }\n      }, 30);\n    });\n    onBeforeUnmount(() => {\n      window.removeEventListener(\"keydown\", keyListener);\n      window.removeEventListener(\"keyup\", keyListener);\n      window.removeEventListener(\"gamepadconnected\", gamepadOnListener);\n      window.removeEventListener(\"gamepaddisconnected\", gamepadOffListener);\n      window.clearInterval(keyUpdateInterval);\n    });\n    return {\n      lx,\n      ly,\n      rx,\n      ry,\n      rightRodStyle,\n      leftRodStyle,\n      extendButtonOn,\n      handleKey,\n      i18n,\n      usbJoystickOn,\n      usbStickAlertOn\n    };\n  }\n});\n","import { render } from \"./VirtualGamepad.vue?vue&type=template&id=0e102768&scoped=true\"\nimport script from \"./VirtualGamepad.vue?vue&type=script&lang=ts\"\nexport * from \"./VirtualGamepad.vue?vue&type=script&lang=ts\"\n\nimport \"./VirtualGamepad.vue?vue&type=style&index=0&id=0e102768&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0e102768\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AiSwitchButton.vue?vue&type=style&index=0&id=f2fc57b0&lang=scss&scoped=true\"","<template>\n  <div class=\"u-content\">\n    <h2>\n      <i class=\"fa fa-eye\"></i>\n      | {{ i18n.$t(\"Vision\") }}\n      <router-link to=\"/visiontest\">\n        <span style=\"float: right; color:black;\">\n          <i class=\"fa fa-cog\"></i>\n        </span>\n      </router-link>\n      <span\n        style=\"float: right; color: gray; margin-right: 20px;\"\n        @click=\"gamepadOn = !gamepadOn\"\n        :style=\"gamepadOn ? 'color: green;' : ''\"\n      >\n        <i class=\"fa fa-gamepad\"></i>\n      </span>\n    </h2>\n    <virtual-gamepad\n      style=\"z-index: 1000;\"\n      @stick-update=\"handleStickData\"\n      @key-update=\"handleActionData\"\n      :keyboardJoystickOn=\"gamepadOn\"\n    ></virtual-gamepad>\n    <div class=\"visionVideos\">\n      <div class=\"innerWrap\">\n        <div class=\"videoBlock\">\n          <div class=\"innerWrap\">\n            <ai-switch-button\n              class=\"left\"\n              :aiSelection=\"mqtt.data.vision.aiMode\"\n              camId=\"cam3\"\n              resetSelection=\"MNFH\"\n              @update=\"aiButtonUpdate\"\n            ></ai-switch-button>\n            <video-projection-stream\n              v-if=\"mqtt.data.vision.aiMode !== 'cam3'\"\n              :wsAddress=\"wsRootAddress + 'cam3'\"\n              :size=\"400\"\n              :offset=\"32\"\n              :fov=\"2\"\n            ></video-projection-stream>\n            <video-stream\n              v-else\n              :wsAddress=\"wsRootAddress + 'human'\"\n            ></video-stream>\n          </div>\n        </div>\n        <div class=\"videoBlock\">\n          <div class=\"innerWrap\">\n            <ai-switch-button\n              class=\"left\"\n              :aiSelection=\"mqtt.data.vision.aiMode\"\n              camId=\"cam1\"\n              resetSelection=\"MNFH\"\n              @update=\"aiButtonUpdate\"\n            ></ai-switch-button>\n            <video-projection-stream\n              v-if=\"mqtt.data.vision.aiMode !== 'cam1'\"\n              :wsAddress=\"wsRootAddress + 'cam1'\"\n              :size=\"400\"\n              :offset=\"32\"\n              :fov=\"2\"\n            ></video-projection-stream>\n            <video-stream\n              v-else\n              :wsAddress=\"wsRootAddress + 'human'\"\n            ></video-stream>\n          </div>\n        </div>\n        <div class=\"videoBlock\">\n          <div class=\"innerWrap\">\n            <ai-switch-button\n              class=\"left\"\n              :aiSelection=\"mqtt.data.vision.aiMode\"\n              camId=\"cam4\"\n              resetSelection=\"MNFH\"\n              @update=\"aiButtonUpdate\"\n            ></ai-switch-button>\n            <video-projection-stream\n              v-if=\"mqtt.data.vision.aiMode !== 'cam4'\"\n              :wsAddress=\"wsRootAddress + 'cam4'\"\n              :size=\"400\"\n              :offset=\"32\"\n              :fov=\"2\"\n            ></video-projection-stream>\n            <video-stream\n              v-else\n              :wsAddress=\"wsRootAddress + 'human'\"\n            ></video-stream>\n          </div>\n        </div>\n        <div class=\"videoBlock\">\n          <div class=\"innerWrap\">\n            <ai-switch-button\n              class=\"left\"\n              :aiSelection=\"mqtt.data.vision.aiMode\"\n              camId=\"cam2\"\n              resetSelection=\"MNFH\"\n              @update=\"aiButtonUpdate\"\n            ></ai-switch-button>\n            <video-stream\n              v-if=\"mqtt.data.vision.aiMode !== 'cam2'\"\n              :wsAddress=\"wsRootAddress + 'cam2'\"\n            ></video-stream>\n            <video-stream\n              v-else\n              :wsAddress=\"wsRootAddress + 'human'\"\n            ></video-stream>\n          </div>\n        </div>\n        <div class=\"videoBlock\">\n          <div class=\"innerWrap\">\n            <ai-switch-button\n              class=\"left\"\n              :aiSelection=\"mqtt.data.vision.aiMode\"\n              camId=\"cam5\"\n              resetSelection=\"MNFH\"\n              @update=\"aiButtonUpdate\"\n            ></ai-switch-button>\n            <video-stream\n              v-if=\"mqtt.data.vision.aiMode !== 'cam5'\"\n              :wsAddress=\"wsRootAddress + 'cam5'\"\n            ></video-stream>\n            <video-stream\n              v-else\n              :wsAddress=\"wsRootAddress + 'human'\"\n            ></video-stream>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, onMounted, onBeforeUnmount } from \"vue\";\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\nimport MqttPlugin from \"@/plugins/mqttPlugin\";\nimport VideoProjectionStream from \"@/components/CameraView/VideoProjectionStream.vue\";\nimport VideoStream from \"@/components/CameraView/VideoStream.vue\";\nimport VirtualGamepad from \"@/components/VirtualGamepad.vue\";\nimport AiSwitchButton from \"@/components/AiSwitchButton.vue\";\nexport default defineComponent({\n  name: \"Vision\",\n  components: {\n    VirtualGamepad,\n    VideoProjectionStream,\n    VideoStream,\n    AiSwitchButton\n  },\n  setup() {\n    const i18n = I18nPlugin.use();\n    const mqtt = MqttPlugin.use();\n    const gamepadOn = ref(false);\n    const aiSelection = ref(\n      \"cam1\" as \"MNFH\" | \"cam1\" | \"cam2\" | \"cam3\" | \"cam4\" | \"cam5\"\n    );\n    const wsRootAddress = ref(\"\");\n    const wsProtocol =\n      window.location.protocol === \"https:\" ? \"wss://\" : \"ws://\";\n    if (process.env.NODE_ENV == \"development\") {\n      wsRootAddress.value =\n        wsProtocol + process.env.VUE_APP_DEVICE_ADDRESS + \"/\";\n    } else {\n      wsRootAddress.value = wsProtocol + window.location.host + \"/\";\n    }\n\n    const aiButtonUpdate = (evt: string) => {\n      mqtt.publish(\"vision/ai_mode\", evt, { qos: 1, retain: true });\n    };\n    const handleStickData = (evt: {\n      lx: number;\n      ly: number;\n      rx: number;\n      ry: number;\n    }) => {\n      const floats = new Float32Array(4);\n      floats[0] = evt.lx;\n      floats[1] = evt.rx;\n      floats[2] = evt.ry;\n      floats[3] = evt.ly;\n      mqtt.publish(\"controller/stick\", floats.buffer, { qos: 0 });\n    };\n    const handleActionData = (evt: string) => {\n      console.log(evt);\n      mqtt.publish(\"controller/action\", evt, { qos: 1 });\n    };\n\n    onMounted(() => {\n      mqtt.subscribe(\"vision/ai_mode\", { qos: 1 });\n    });\n\n    onBeforeUnmount(() => {\n      mqtt.unsubscribe(\"vision/ai_mode\");\n    });\n\n    return {\n      i18n,\n      mqtt,\n      wsRootAddress,\n      aiSelection,\n      aiButtonUpdate,\n      handleStickData,\n      handleActionData,\n      gamepadOn\n    };\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.u-content {\n  position: relative;\n  min-height: 455px;\n  overflow: hidden;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  h2 {\n    width: 100%;\n    height: 55px;\n    margin: 0;\n  }\n  .innerWrap {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    line-height: 0;\n    text-align: center;\n  }\n  .visionVideos {\n    width: min(100%, calc(1.5 * (100vh - 55px)));\n    min-width: 600px;\n    min-height: 400px;\n    padding-top: min(66.6%, calc(100vh - 55px));\n    overflow: hidden;\n    position: relative;\n    margin: 0;\n    .videoBlock {\n      display: inline-block;\n      position: relative;\n      width: 33.333%;\n      padding-top: 33.333%;\n      background: #eeeeee;\n      border: solid 1px #ffdddd;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"aiSwitchButton\" @click=\"handleClick\">\n    <span v-if=\"aiSelection === camId\" style=\"color: orange\">AI</span>\n    <i v-else class=\"fa fa-globe\" style=\"color: green\"></i>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"AiSwitchButton\",\n  props: {\n    camId: String,\n    aiSelection: String,\n    resetSelection: String\n  },\n  setup(props, context) {\n    const handleClick = () => {\n      if (props.aiSelection === props.camId) {\n        context.emit(\"update\", props.resetSelection);\n      } else {\n        context.emit(\"update\", props.camId);\n      }\n    };\n    return { handleClick };\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.aiSwitchButton {\n  background: rgba($color: black, $alpha: 0.1);\n  width: 4ex;\n  height: 4ex;\n  font-size: 2ex;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 0.5ex;\n  margin: 3vh;\n  position: absolute;\n  top: 0px;\n  &.right {\n    right: 0px;\n  }\n  &.left {\n    left: 0px;\n  }\n  z-index: 10;\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"AiSwitchButton\",\n  props: {\n    camId: String,\n    aiSelection: String,\n    resetSelection: String\n  },\n  setup(props, context) {\n    const handleClick = () => {\n      if (props.aiSelection === props.camId) {\n        context.emit(\"update\", props.resetSelection);\n      } else {\n        context.emit(\"update\", props.camId);\n      }\n    };\n    return { handleClick };\n  }\n});\n","import { render } from \"./AiSwitchButton.vue?vue&type=template&id=f2fc57b0&scoped=true\"\nimport script from \"./AiSwitchButton.vue?vue&type=script&lang=ts\"\nexport * from \"./AiSwitchButton.vue?vue&type=script&lang=ts\"\n\nimport \"./AiSwitchButton.vue?vue&type=style&index=0&id=f2fc57b0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-f2fc57b0\"\n\nexport default script","\nimport { defineComponent, ref, onMounted, onBeforeUnmount } from \"vue\";\nimport I18nPlugin from \"@/plugins/i18nPlugin\";\nimport MqttPlugin from \"@/plugins/mqttPlugin\";\nimport VideoProjectionStream from \"@/components/CameraView/VideoProjectionStream.vue\";\nimport VideoStream from \"@/components/CameraView/VideoStream.vue\";\nimport VirtualGamepad from \"@/components/VirtualGamepad.vue\";\nimport AiSwitchButton from \"@/components/AiSwitchButton.vue\";\nexport default defineComponent({\n  name: \"Vision\",\n  components: {\n    VirtualGamepad,\n    VideoProjectionStream,\n    VideoStream,\n    AiSwitchButton\n  },\n  setup() {\n    const i18n = I18nPlugin.use();\n    const mqtt = MqttPlugin.use();\n    const gamepadOn = ref(false);\n    const aiSelection = ref(\n      \"cam1\" as \"MNFH\" | \"cam1\" | \"cam2\" | \"cam3\" | \"cam4\" | \"cam5\"\n    );\n    const wsRootAddress = ref(\"\");\n    const wsProtocol =\n      window.location.protocol === \"https:\" ? \"wss://\" : \"ws://\";\n    if (process.env.NODE_ENV == \"development\") {\n      wsRootAddress.value =\n        wsProtocol + process.env.VUE_APP_DEVICE_ADDRESS + \"/\";\n    } else {\n      wsRootAddress.value = wsProtocol + window.location.host + \"/\";\n    }\n\n    const aiButtonUpdate = (evt: string) => {\n      mqtt.publish(\"vision/ai_mode\", evt, { qos: 1, retain: true });\n    };\n    const handleStickData = (evt: {\n      lx: number;\n      ly: number;\n      rx: number;\n      ry: number;\n    }) => {\n      const floats = new Float32Array(4);\n      floats[0] = evt.lx;\n      floats[1] = evt.rx;\n      floats[2] = evt.ry;\n      floats[3] = evt.ly;\n      mqtt.publish(\"controller/stick\", floats.buffer, { qos: 0 });\n    };\n    const handleActionData = (evt: string) => {\n      console.log(evt);\n      mqtt.publish(\"controller/action\", evt, { qos: 1 });\n    };\n\n    onMounted(() => {\n      mqtt.subscribe(\"vision/ai_mode\", { qos: 1 });\n    });\n\n    onBeforeUnmount(() => {\n      mqtt.unsubscribe(\"vision/ai_mode\");\n    });\n\n    return {\n      i18n,\n      mqtt,\n      wsRootAddress,\n      aiSelection,\n      aiButtonUpdate,\n      handleStickData,\n      handleActionData,\n      gamepadOn\n    };\n  }\n});\n","import { render } from \"./Vision.vue?vue&type=template&id=5d5c6775&scoped=true\"\nimport script from \"./Vision.vue?vue&type=script&lang=ts\"\nexport * from \"./Vision.vue?vue&type=script&lang=ts\"\n\nimport \"./Vision.vue?vue&type=style&index=0&id=5d5c6775&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5d5c6775\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VirtualGamepad.vue?vue&type=style&index=0&id=0e102768&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Vision.vue?vue&type=style&index=0&id=5d5c6775&lang=scss&scoped=true\""],"sourceRoot":""}